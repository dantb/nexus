QUERY=$1
SIZE=$2

echo "Running with query $QUERY and size $SIZE"

URL="https://nise.bbp.epfl.ch/nexus/v1/resources/public/thalamus?from=0&q=$QUERY&size=$SIZE"

echo "Calling URL $URL"

curl --location $URL \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI5T0R3Z1JSTFVsTTJHbFphVDZjVklnenJsb0lzUWJmbTBDck1icXNjNHQ4In0.eyJleHAiOjE3MDAxNjExNDksImlhdCI6MTcwMDEzMjM0OSwiYXV0aF90aW1lIjoxNzAwMTI1NjQ2LCJqdGkiOiJhZmRkNGVlMS0wMTIxLTRlN2YtYTg2OC04ZTIzMmFiODJhYzAiLCJpc3MiOiJodHRwczovL2JicGF1dGguZXBmbC5jaC9hdXRoL3JlYWxtcy9CQlAiLCJhdWQiOlsiaHR0cHM6Ly9zbGFjay5jb20iLCJjb3Jlc2VydmljZXMtZ2l0bGFiIiwiYWNjb3VudCJdLCJzdWIiOiJmOjBmZGFkZWY3LWIyYjktNDkyYi1hZjQ2LWM2NTQ5MmQ0NTljMjp0YXR0YW4iLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJiYnAtbmlzZS1uZXh1cy1mdXNpb24iLCJub25jZSI6IjM2YThkNTBkNDFhNjRjNWY5MWE5OGM5MzgzYjAxMTU1Iiwic2Vzc2lvbl9zdGF0ZSI6IjM5NTk0MWYwLTQ1ZjAtNDRmNi1iNDhlLTliZDgzODA5OWQ3ZiIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJiYnAtcGFtLWF1dGhlbnRpY2F0aW9uIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtYmJwIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiaHR0cHM6Ly9zbGFjay5jb20iOnsicm9sZXMiOlsicmVzdHJpY3RlZC1hY2Nlc3MiXX0sImNvcmVzZXJ2aWNlcy1naXRsYWIiOnsicm9sZXMiOlsicmVzdHJpY3RlZC1hY2Nlc3MiXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIG5leHVzIHByb2ZpbGUgbG9jYXRpb24gZW1haWwiLCJzaWQiOiIzOTU5NDFmMC00NWYwLTQ0ZjYtYjQ4ZS05YmQ4MzgwOTlkN2YiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IkRhbmllbCBDaWFuIFRhdHRhbi1CaXJjaCIsImxvY2F0aW9uIjoiQjEgMyAyODQuMDQ1IiwicHJlZmVycmVkX3VzZXJuYW1lIjoidGF0dGFuIiwiZ2l2ZW5fbmFtZSI6IkRhbmllbCBDaWFuIiwiZmFtaWx5X25hbWUiOiJUYXR0YW4tQmlyY2giLCJlbWFpbCI6ImRhbmllbC50YXR0YW4tYmlyY2hAZXBmbC5jaCJ9.RvR6Na8Ve3P73Nc_2r2SKOUweE4nfR98TKEmpEnv3qxW-purA05hexaEmlEHcXY4b34detvNG8dVEt8tMOg-ElBS2UaTTneYzmP5U5uT2ODw8F6iq6-InuTtlPLz5cyoUrThGlJQR3YZts27hI5crGkf-8_vSMdxzLuCKE9QwANUisRGE4DooB5yMmYjKR5QAF-yD9r8G4jlDFntPdOYOPO08z_6BOl8F3i1G_EZ3L2Og-Q8vjvIgod_OW8DH24JMVxaV8tewXqGWFo7ApjwbtKKkPnYJxfM2a_2InjNHZLkWVTgJ8mt4vxyLSEsnjBYLQ8KuGx-Y6xLOxqnU4kaKQ' \
--header 'Content-Type: application/json' | jq '._results[] | {"@id", "_uuid"}'